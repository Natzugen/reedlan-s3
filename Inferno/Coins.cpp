#include "StdAfx.h"
#include "Coins.h"
#include "Utils.h"
#include "User.h"
//========================================================================================================================
// Coin 100kk
//========================================================================================================================
void Coin1(DWORD aIndex)
{
   OBJECTSTRUCT * gObj = (OBJECTSTRUCT*)OBJECT_POINTER(aIndex);
   int BuffNumber = rand()%8+1;
//========================================================================================================================
// [1]Coin Config
//========================================================================================================================
   	int isActive = GetPrivateProfileInt("Coin_1","IsActive",1,".\\Config\\Coins.cfg");
	int ZenNeed = GetPrivateProfileInt("Coin_1","CoinPrice",100000,".\\Config\\Coins.cfg");
	int LevelMin1 = GetPrivateProfileInt("Coin_1","MaximumLevel",20,".\\Config\\Coins.cfg");
	int LevelMin2 = GetPrivateProfileInt("Coin_1","MinimumLevel",20,".\\Config\\Coins.cfg");
//=======================================================================================================================
// [1]Coin Active
//========================================================================================================================
if(isActive==0)
	{
		MsgNormal(aIndex,"[Coin] : System is disabled.");
		return;
	}
//========================================================================================================================
// [1]Coin Maximum Level
//========================================================================================================================
if (LevelMin1 != 0)
{
if (gObj->Level > LevelMin1)
{
		MsgNormal(aIndex,"[Coin]  : You have a maximum level");
		return;
}
}
//========================================================================================================================
// [1]Coin Minimum Level
//========================================================================================================================
if (LevelMin2 != 0)
{
if (gObj->Level < LevelMin2)
{
		MsgNormal(aIndex,"[Coin]  : You do not have enough level");
		return;
}
}
//========================================================================================================================
// [1]Coin Zen Need
//========================================================================================================================
if(gObj->Money < ZenNeed)
    {
		MsgNormal(aIndex,"[Coin] : You need %d zen.",ZenNeed);
		return;
	}
//========================================================================================================================
// [1]Coin Give Coin
//========================================================================================================================
ItemSerialCreateSend(aIndex,gObj->MapNumber,gObj->X,gObj->Y,7272,0,0,0,0,0,aIndex,0,0);
//========================================================================================================================
// [1]Coin Give Zen
//========================================================================================================================
		gObj->Money -= ZenNeed;
		GCMoneySend(aIndex,gObj->Money);
}
//========================================================================================================================
// Coin 250kk
//========================================================================================================================
void Coin2(DWORD aIndex)
{
   OBJECTSTRUCT * gObj = (OBJECTSTRUCT*)OBJECT_POINTER(aIndex);
   int BuffNumber = rand()%8+1;
//========================================================================================================================
// [1]Coin Config
//========================================================================================================================
   	int isActive = GetPrivateProfileInt("Coin_2","IsActive",1,".\\Config\\Coins.cfg");
	int ZenNeed = GetPrivateProfileInt("Coin_2","CoinPrice",100000,".\\Config\\Coins.cfg");
	int LevelMin1 = GetPrivateProfileInt("Coin_2","MaximumLevel",20,".\\Config\\Coins.cfg");
	int LevelMin2 = GetPrivateProfileInt("Coin_2","MinimumLevel",20,".\\Config\\Coins.cfg");
//=======================================================================================================================
// [1]Coin Active
//========================================================================================================================
if(isActive==0)
	{
		MsgNormal(aIndex,"[Coin] : System is disabled.");
		return;
	}
//========================================================================================================================
// [1]Coin Maximum Level
//========================================================================================================================
if (LevelMin1 != 0)
{
if (gObj->Level > LevelMin1)
{
		MsgNormal(aIndex,"[Coin]  : You have a maximum level");
		return;
}
}
//========================================================================================================================
// [1]Coin Minimum Level
//========================================================================================================================
if (LevelMin2 != 0)
{
if (gObj->Level < LevelMin2)
{
		MsgNormal(aIndex,"[Coin]  : You do not have enough level");
		return;
}
}
//========================================================================================================================
// [1]Coin Zen Need
//========================================================================================================================
if(gObj->Money < ZenNeed)
    {
		MsgNormal(aIndex,"[Coin] : You need %d zen.",ZenNeed);
		return;
	}
//========================================================================================================================
// [1]Coin Give Coin
//========================================================================================================================
ItemSerialCreateSend(aIndex,gObj->MapNumber,gObj->X,gObj->Y,7273,0,0,0,0,0,aIndex,0,0);
//========================================================================================================================
// [1]Coin Give Zen
//========================================================================================================================
		gObj->Money -= ZenNeed;
		GCMoneySend(aIndex,gObj->Money);
}
//========================================================================================================================
// Coin 500kk
//========================================================================================================================
void Coin3(DWORD aIndex)
{
   OBJECTSTRUCT * gObj = (OBJECTSTRUCT*)OBJECT_POINTER(aIndex);
   int BuffNumber = rand()%8+1;
//========================================================================================================================
// [1]Coin Config
//========================================================================================================================
   	int isActive = GetPrivateProfileInt("Coin_3","IsActive",1,".\\Config\\Coins.cfg");
	int ZenNeed = GetPrivateProfileInt("Coin_3","CoinPrice",100000,".\\Config\\Coins.cfg");
	int LevelMin1 = GetPrivateProfileInt("Coin_3","MaximumLevel",20,".\\Config\\Coins.cfg");
	int LevelMin2 = GetPrivateProfileInt("Coin_3","MinimumLevel",20,".\\Config\\Coins.cfg");
//=======================================================================================================================
// [1]Coin Active
//========================================================================================================================
if(isActive==0)
	{
		MsgNormal(aIndex,"[Coin] : System is disabled.");
		return;
	}
//========================================================================================================================
// [1]Coin Maximum Level
//========================================================================================================================
if (LevelMin1 != 0)
{
if (gObj->Level > LevelMin1)
{
		MsgNormal(aIndex,"[Coin]  : You have a maximum level");
		return;
}
}
//========================================================================================================================
// [1]Coin Minimum Level
//========================================================================================================================
if (LevelMin2 != 0)
{
if (gObj->Level < LevelMin2)
{
		MsgNormal(aIndex,"[Coin]  : You do not have enough level");
		return;
}
}
//========================================================================================================================
// [1]Coin Zen Need
//========================================================================================================================
if(gObj->Money < ZenNeed)
    {
		MsgNormal(aIndex,"[Coin] : You need %d zen.",ZenNeed);
		return;
	}
//========================================================================================================================
// [1]Coin Give Coin
//========================================================================================================================
ItemSerialCreateSend(aIndex,gObj->MapNumber,gObj->X,gObj->Y,7274,0,0,0,0,0,aIndex,0,0);
//========================================================================================================================
// [1]Coin Give Zen
//========================================================================================================================
		gObj->Money -= ZenNeed;
		GCMoneySend(aIndex,gObj->Money);
}